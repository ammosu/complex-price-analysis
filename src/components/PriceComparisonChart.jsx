import React, { useState, useMemo } from 'react';
import { Card, CardHeader, CardTitle, CardContent } from './ui/card';
import {
  LineChart,
  Line,
  XAxis,
  YAxis,
  CartesianGrid,
  Tooltip,
  Legend,
  ResponsiveContainer
} from 'recharts';

// 示範資料
const sampleData = [{county: '嘉義市',
    time: "202209",
    complex_name: '碧富邑',
    RHP: 28978.50760685825,
    yhat: 40961.4892074871},
   {county: '嘉義市',
    time: "202212",
    complex_name: '碧富邑',
    RHP: 50253.30447598599,
    yhat: 42880.048449129274},
   {county: '嘉義市',
    time: "202301",
    complex_name: '亞洲書香苑',
    RHP: 55826.93649685972,
    yhat: 47776.20571928173},
   {county: '嘉義市',
    time: "202301",
    complex_name: '碧富邑',
    RHP: 43467.76141028737,
    yhat: 42047.746230088356},
   {county: '嘉義市',
    time: "202303",
    complex_name: '亞洲書香苑',
    RHP: 57278.72041500054,
    yhat: 51764.008957301725},
   {county: '嘉義市',
    time: "202308",
    complex_name: '碧富邑',
    RHP: 34894.23250768396,
    yhat: 42467.78106372039},
   {county: '嘉義市',
    time: "202309",
    complex_name: '亞洲書香苑',
    RHP: 43076.08597079895,
    yhat: 50591.042505216275},
   {county: '嘉義市',
    time: "202310",
    complex_name: '亞洲書香苑',
    RHP: 52373.63059773207,
    yhat: 52053.282882485575},
   {county: '嘉義市',
    time: "202310",
    complex_name: '碧富邑',
    RHP: 33989.51989803144,
    yhat: 40685.032226751086},
   {county: '嘉義市',
    time: "202401",
    complex_name: '碧富邑',
    RHP: 39616.3469557965,
    yhat: 45882.40099661374},
   {county: '嘉義市',
    time: "202402",
    complex_name: '碧富邑',
    RHP: 42030.39120594892,
    yhat: 49521.521783664015},
   {county: '嘉義市',
    time: "202403",
    complex_name: '碧富邑',
    RHP: 52628.47560324681,
    yhat: 47653.15335662824},
   {county: '嘉義市',
    time: "202404",
    complex_name: '亞洲書香苑',
    RHP: 64377.151311228445,
    yhat: 59678.23942179386},
   {county: '嘉義市',
    time: "202404",
    complex_name: '碧富邑',
    RHP: 54211.84320266889,
    yhat: 50219.39834201422},
   {county: '嘉義市',
    time: "202406",
    complex_name: '亞洲書香苑',
    RHP: 57174.77404285569,
    yhat: 61863.966977882},
   {county: '嘉義市',
    time: "202408",
    complex_name: '碧富邑',
    RHP: 67895.24733268672,
    yhat: 53698.05523290915},
   {county: '嘉義市',
    time: "202410",
    complex_name: '亞洲書香苑',
    RHP: 68633.15628995173,
    yhat: 59504.269389435176},
   {county: '嘉義市',
    time: "202411",
    complex_name: '碧富邑',
    RHP: 79632.91888691533,
    yhat: 52171.635952123164},
   {county: '彰化縣',
    time: "202310",
    complex_name: '鹿和居大樓區',
    RHP: 57792.18492598351,
    yhat: 62830.3123837433},
   {county: '彰化縣',
    time: "202311",
    complex_name: '鹿和居大樓區',
    RHP: 68702.88319279933,
    yhat: 63160.81536926111},
   {county: '彰化縣',
    time: "202401",
    complex_name: '鹿和居大樓區',
    RHP: 78767.63678155337,
    yhat: 65782.11253695046},
   {county: '彰化縣',
    time: "202402",
    complex_name: '鹿和居大樓區',
    RHP: 72194.26821264494,
    yhat: 66043.60730474067},
   {county: '彰化縣',
    time: "202403",
    complex_name: '鹿和居大樓區',
    RHP: 75081.28879692582,
    yhat: 70802.22610746053},
   {county: '彰化縣',
    time: "202405",
    complex_name: '鹿和居大樓區',
    RHP: 79421.3167995276,
    yhat: 68311.53221566859},
   {county: '彰化縣',
    time: "202406",
    complex_name: '鹿和居大樓區',
    RHP: 83143.61660275079,
    yhat: 67514.63421930466},
   {county: '彰化縣',
    time: "202407",
    complex_name: '鹿和居大樓區',
    RHP: 102566.665382063,
    yhat: 71094.76551553176},
   {county: '彰化縣',
    time: "202409",
    complex_name: '鹿和居大樓區',
    RHP: 72506.34263586593,
    yhat: 74271.75576460965},
   {county: '新北市',
    time: "202208",
    complex_name: '都心鳳凰',
    RHP: 126353.79061371842,
    yhat: 133850.30141645225},
   {county: '新北市',
    time: "202212",
    complex_name: '都心鳳凰',
    RHP: 142516.6825548141,
    yhat: 146110.1898932832},
   {county: '新北市',
    time: "202312",
    complex_name: '都心鳳凰',
    RHP: 142214.3865526308,
    yhat: 158921.7571629574},
   {county: '新北市',
    time: "202402",
    complex_name: '都心鳳凰',
    RHP: 136147.60972882304,
    yhat: 151056.9926291582},
   {county: '新北市',
    time: "202403",
    complex_name: '都心鳳凰',
    RHP: 166789.4349152899,
    yhat: 155808.4124664725},
   {county: '新北市',
    time: "202405",
    complex_name: '都心鳳凰',
    RHP: 166808.71788627785,
    yhat: 162166.11708626634},
   {county: '新北市',
    time: "202406",
    complex_name: '都心鳳凰',
    RHP: 195258.01952580197,
    yhat: 180050.073121841},
   {county: '新北市',
    time: "202407",
    complex_name: '都心鳳凰',
    RHP: 166509.58215519952,
    yhat: 179261.59753181858},
   {county: '新竹市',
    time: "202207",
    complex_name: '春福生活大賞',
    RHP: 57453.57545911563,
    yhat: 37468.86688236178},
   {county: '新竹市',
    time: "202208",
    complex_name: '春福生活大賞',
    RHP: 80609.7828471156,
    yhat: 53619.20289463913},
   {county: '新竹市',
    time: "202210",
    complex_name: '春福生活大賞',
    RHP: 51014.0599726266,
    yhat: 39183.76389233119},
   {county: '新竹市',
    time: "202212",
    complex_name: '春福生活大賞',
    RHP: 39574.42577309337,
    yhat: 42643.65368342426},
   {county: '新竹市',
    time: "202302",
    complex_name: '春福生活大賞',
    RHP: 47000.98338382381,
    yhat: 43520.66482459377},
   {county: '新竹市',
    time: "202303",
    complex_name: '春福生活大賞',
    RHP: 58675.743014584295,
    yhat: 44654.452818378944},
   {county: '新竹市',
    time: "202304",
    complex_name: '春福生活大賞',
    RHP: 56847.28054901158,
    yhat: 46239.99377731221},
   {county: '新竹市',
    time: "202305",
    complex_name: '春福生活大賞',
    RHP: 44357.33443367032,
    yhat: 42629.54454747705},
   {county: '新竹市',
    time: "202306",
    complex_name: '春福生活大賞',
    RHP: 50144.9378210741,
    yhat: 45687.423877561814},
   {county: '新竹市',
    time: "202307",
    complex_name: '春福生活大賞',
    RHP: 61366.02453324127,
    yhat: 51170.214935069926},
   {county: '新竹市',
    time: "202308",
    complex_name: '春福生活大賞',
    RHP: 35996.01746189783,
    yhat: 41676.89853995587},
   {county: '新竹市',
    time: "202310",
    complex_name: '春福生活大賞',
    RHP: 54898.93014543329,
    yhat: 50277.74595674104},
   {county: '新竹市',
    time: "202312",
    complex_name: '春福生活大賞',
    RHP: 40625.275986929264,
    yhat: 43090.19733755259},
   {county: '新竹市',
    time: "202402",
    complex_name: '春福生活大賞',
    RHP: 89556.24078294677,
    yhat: 60216.0624651593},
   {county: '新竹市',
    time: "202405",
    complex_name: '春福生活大賞',
    RHP: 52303.174894476055,
    yhat: 56968.8998436286},
   {county: '新竹市',
    time: "202406",
    complex_name: '春福生活大賞',
    RHP: 83523.91369195585,
    yhat: 60463.063459550336},
   {county: '新竹市',
    time: "202407",
    complex_name: '春福生活大賞',
    RHP: 67622.6974904191,
    yhat: 57718.4103504071},
   {county: '新竹市',
    time: "202408",
    complex_name: '春福生活大賞',
    RHP: 101506.22134905042,
    yhat: 65364.90268960394},
   {county: '新竹縣',
    time: "202209",
    complex_name: '仁發富悅',
    RHP: 174468.57105231733,
    yhat: 169533.66144490306},
   {county: '新竹縣',
    time: "202210",
    complex_name: '美都儷舍',
    RHP: 48156.75855197609,
    yhat: 40009.33795559931},
   {county: '新竹縣',
    time: "202211",
    complex_name: '仁發富悅',
    RHP: 185613.35902376365,
    yhat: 166772.61338735104},
   {county: '新竹縣',
    time: "202211",
    complex_name: '美都儷舍',
    RHP: 44387.093162671044,
    yhat: 38468.04586957238},
   {county: '新竹縣',
    time: "202212",
    complex_name: '美都儷舍',
    RHP: 49042.83203509721,
    yhat: 37819.74862385101},
   {county: '新竹縣',
    time: "202301",
    complex_name: '美都儷舍',
    RHP: 45829.5142071494,
    yhat: 36901.217096219916},
   {county: '新竹縣',
    time: "202304",
    complex_name: '仁發富悅',
    RHP: 162815.58502722028,
    yhat: 173469.29283576063},
   {county: '新竹縣',
    time: "202307",
    complex_name: '仁發富悅',
    RHP: 165600.2602754582,
    yhat: 177403.82966211744},
   {county: '新竹縣',
    time: "202310",
    complex_name: '仁發富悅',
    RHP: 188312.6792583177,
    yhat: 191236.6320961787},
   {county: '新竹縣',
    time: "202310",
    complex_name: '美都儷舍',
    RHP: 48442.17694713845,
    yhat: 43879.709467518405},
   {county: '新竹縣',
    time: "202311",
    complex_name: '美都儷舍',
    RHP: 55733.50416399744,
    yhat: 43489.924212062826},
   {county: '新竹縣',
    time: "202312",
    complex_name: '仁發富悅',
    RHP: 186328.5634829861,
    yhat: 189627.11459430537},
   {county: '新竹縣',
    time: "202402",
    complex_name: '仁發富悅',
    RHP: 183236.9942196532,
    yhat: 192691.58250190798},
   {county: '新竹縣',
    time: "202403",
    complex_name: '仁發富悅',
    RHP: 204190.67861082582,
    yhat: 202562.55112351233},
   {county: '新竹縣',
    time: "202404",
    complex_name: '仁發富悅',
    RHP: 224473.16334846895,
    yhat: 198927.02504475336},
   {county: '新竹縣',
    time: "202405",
    complex_name: '美都儷舍',
    RHP: 68196.93945442449,
    yhat: 48456.853450697716},
   {county: '新竹縣',
    time: "202407",
    complex_name: '美都儷舍',
    RHP: 73709.04378929062,
    yhat: 55673.18706902661},
   {county: '新竹縣',
    time: "202408",
    complex_name: '美都儷舍',
    RHP: 65202.470830473576,
    yhat: 50589.81106219574},
   {county: '新竹縣',
    time: "202409",
    complex_name: '仁發富悅',
    RHP: 238154.76934616824,
    yhat: 217085.43238708138},
   {county: '新竹縣',
    time: "202410",
    complex_name: '美都儷舍',
    RHP: 80645.16129032258,
    yhat: 50500.00757797508},
   {county: '桃園市',
    time: "202207",
    complex_name: '名軒快樂家',
    RHP: 94694.60139811733,
    yhat: 89802.12086623572},
   {county: '桃園市',
    time: "202207",
    complex_name: '愛上杜拜',
    RHP: 66309.69597632007,
    yhat: 67038.94392725124},
   {county: '桃園市',
    time: "202207",
    complex_name: '金華大學城',
    RHP: 57861.6932047393,
    yhat: 62344.78699059149},
   {county: '桃園市',
    time: "202208",
    complex_name: '名軒快樂家',
    RHP: 86940.2793092371,
    yhat: 90810.97328851749},
   {county: '桃園市',
    time: "202208",
    complex_name: '金華大學城',
    RHP: 66023.06690697203,
    yhat: 63482.11416093151},
   {county: '桃園市',
    time: "202209",
    complex_name: '元智生活會館(元智金雞母)',
    RHP: 64388.165272031125,
    yhat: 66990.89969370431},
   {county: '桃園市',
    time: "202209",
    complex_name: '愛上杜拜',
    RHP: 70770.02986625115,
    yhat: 65480.91278234687},
   {county: '桃園市',
    time: "202210",
    complex_name: '元智生活會館(元智金雞母)',
    RHP: 64470.29506835563,
    yhat: 67073.78556277332},
   {county: '桃園市',
    time: "202210",
    complex_name: '名軒快樂家',
    RHP: 90187.2964169381,
    yhat: 90371.61670242102},
   {county: '桃園市',
    time: "202210",
    complex_name: '愛上杜拜',
    RHP: 69450.9253137932,
    yhat: 65661.61694138068},
   {county: '桃園市',
    time: "202211",
    complex_name: '名軒快樂家',
    RHP: 93124.37687741886,
    yhat: 92368.08430130058},
   {county: '桃園市',
    time: "202211",
    complex_name: '金華大學城',
    RHP: 72983.747316774,
    yhat: 64625.97349761041},
   {county: '桃園市',
    time: "202212",
    complex_name: '名軒快樂家',
    RHP: 86645.66165777994,
    yhat: 89261.22535728962},
   {county: '桃園市',
    time: "202212",
    complex_name: '巴黎富邑社區',
    RHP: 88976.86464325637,
    yhat: 83719.47521930502},
   {county: '桃園市',
    time: "202212",
    complex_name: '愛上杜拜',
    RHP: 72707.79121383744,
    yhat: 68702.3899098379},
   {county: '桃園市',
    time: "202212",
    complex_name: '金華大學城',
    RHP: 63067.87814003207,
    yhat: 62525.600997786794},
   {county: '桃園市',
    time: "202301",
    complex_name: '名軒快樂家',
    RHP: 94817.44556873405,
    yhat: 91944.52318639672},
   {county: '桃園市',
    time: "202302",
    complex_name: '元智生活會館(元智金雞母)',
    RHP: 56854.07454200884,
    yhat: 68506.029545803},
   {county: '桃園市',
    time: "202302",
    complex_name: '名軒快樂家',
    RHP: 90175.305839324,
    yhat: 92870.40125580813},
   {county: '桃園市',
    time: "202302",
    complex_name: '巴黎富邑社區',
    RHP: 86652.07877461707,
    yhat: 89598.50578296967},
   {county: '桃園市',
    time: "202302",
    complex_name: '金華大學城',
    RHP: 77968.81247501,
    yhat: 70530.24554015933},
   {county: '桃園市',
    time: "202303",
    complex_name: '名軒快樂家',
    RHP: 91297.44883499686,
    yhat: 90845.82059064318},
   {county: '桃園市',
    time: "202303",
    complex_name: '愛上杜拜',
    RHP: 71188.38096722693,
    yhat: 68751.50414735673},
   {county: '桃園市',
    time: "202303",
    complex_name: '金華大學城',
    RHP: 72410.53316556054,
    yhat: 67110.60912121754},
   {county: '桃園市',
    time: "202304",
    complex_name: '名軒快樂家',
    RHP: 85988.35038738133,
    yhat: 89437.4104900242},
   {county: '桃園市',
    time: "202305",
    complex_name: '元智生活會館(元智金雞母)',
    RHP: 66775.24429967425,
    yhat: 74206.32987711603},
   {county: '桃園市',
    time: "202305",
    complex_name: '名軒快樂家',
    RHP: 90571.52506219361,
    yhat: 94094.87074059842},
   {county: '桃園市',
    time: "202305",
    complex_name: '巴黎富邑社區',
    RHP: 83773.75883156521,
    yhat: 84558.42671248167},
   {county: '桃園市',
    time: "202305",
    complex_name: '金華大學城',
    RHP: 70110.91479983013,
    yhat: 70894.79847586206},
   {county: '桃園市',
    time: "202306",
    complex_name: '名軒快樂家',
    RHP: 93610.43218874105,
    yhat: 93782.85488411882},
   {county: '桃園市',
    time: "202306",
    complex_name: '金華大學城',
    RHP: 74549.95684517693,
    yhat: 68484.10342464963},
   {county: '桃園市',
    time: "202307",
    complex_name: '元智生活會館(元智金雞母)',
    RHP: 70548.983955049,
    yhat: 72284.94792748253},
   {county: '桃園市',
    time: "202307",
    complex_name: '名軒快樂家',
    RHP: 85350.24080960802,
    yhat: 92015.74233938084},
   {county: '桃園市',
    time: "202307",
    complex_name: '巴黎富邑社區',
    RHP: 106109.5470007811,
    yhat: 95246.11056129645},
   {county: '桃園市',
    time: "202308",
    complex_name: '元智生活會館(元智金雞母)',
    RHP: 71517.47287349596,
    yhat: 73070.3531493152},
   {county: '桃園市',
    time: "202308",
    complex_name: '名軒快樂家',
    RHP: 96664.43225544922,
    yhat: 97218.46142850892},
   {county: '桃園市',
    time: "202308",
    complex_name: '巴黎富邑社區',
    RHP: 91443.4541084482,
    yhat: 96838.57901363706},
   {county: '桃園市',
    time: "202308",
    complex_name: '愛上杜拜',
    RHP: 73262.83987915408,
    yhat: 72982.72088603847},
   {county: '桃園市',
    time: "202308",
    complex_name: '金華大學城',
    RHP: 67128.57978110127,
    yhat: 71586.32871713047},
   {county: '桃園市',
    time: "202309",
    complex_name: '元智生活會館(元智金雞母)',
    RHP: 72646.87302590019,
    yhat: 74240.01570354044},
   {county: '桃園市',
    time: "202309",
    complex_name: '名軒快樂家',
    RHP: 94595.68885291218,
    yhat: 98971.2514141681},
   {county: '桃園市',
    time: "202309",
    complex_name: '巴黎富邑社區',
    RHP: 93025.13030311576,
    yhat: 86673.82311736613},
   {county: '桃園市',
    time: "202310",
    complex_name: '名軒快樂家',
    RHP: 93692.11977499654,
    yhat: 99014.73811885863},
   {county: '桃園市',
    time: "202310",
    complex_name: '愛上杜拜',
    RHP: 74773.41389728096,
    yhat: 74834.59527927169},
   {county: '桃園市',
    time: "202310",
    complex_name: '金華大學城',
    RHP: 75602.37284349851,
    yhat: 71661.6415340678},
   {county: '桃園市',
    time: "202311",
    complex_name: '元智生活會館(元智金雞母)',
    RHP: 77421.51426691485,
    yhat: 75569.03610604565},
   {county: '桃園市',
    time: "202311",
    complex_name: '名軒快樂家',
    RHP: 93537.33014120723,
    yhat: 97084.07561364277},
   {county: '桃園市',
    time: "202311",
    complex_name: '巴黎富邑社區',
    RHP: 99741.41115626154,
    yhat: 100507.12462174741},
   {county: '桃園市',
    time: "202312",
    complex_name: '元智生活會館(元智金雞母)',
    RHP: 80543.27226784587,
    yhat: 74640.40501285347},
   {county: '桃園市',
    time: "202312",
    complex_name: '名軒快樂家',
    RHP: 92491.66219157974,
    yhat: 97909.43969843368},
   {county: '桃園市',
    time: "202312",
    complex_name: '巴黎富邑社區',
    RHP: 85399.11032963691,
    yhat: 92271.23940610678},
   {county: '桃園市',
    time: "202312",
    complex_name: '金華大學城',
    RHP: 82858.7631616082,
    yhat: 73923.36508819654},
   {county: '桃園市',
    time: "202401",
    complex_name: '元智生活會館(元智金雞母)',
    RHP: 91598.2312065698,
    yhat: 76437.65977726801},
   {county: '桃園市',
    time: "202401",
    complex_name: '名軒快樂家',
    RHP: 100522.15779211783,
    yhat: 100262.72537199163},
   {county: '桃園市',
    time: "202401",
    complex_name: '愛上杜拜',
    RHP: 78065.20740854126,
    yhat: 76694.35117093258},
   {county: '桃園市',
    time: "202402",
    complex_name: '元智生活會館(元智金雞母)',
    RHP: 67298.57819905214,
    yhat: 77041.870696114},
   {county: '桃園市',
    time: "202402",
    complex_name: '愛上杜拜',
    RHP: 78577.96765334147,
    yhat: 77772.04267417091},
   {county: '桃園市',
    time: "202402",
    complex_name: '金華大學城',
    RHP: 57822.03662062319,
    yhat: 72945.13719044256},
   {county: '桃園市',
    time: "202403",
    complex_name: '名軒快樂家',
    RHP: 97894.09987204507,
    yhat: 100201.38368525167},
   {county: '桃園市',
    time: "202404",
    complex_name: '元智生活會館(元智金雞母)',
    RHP: 75805.43272267845,
    yhat: 80277.99337214945},
   {county: '桃園市',
    time: "202404",
    complex_name: '巴黎富邑社區',
    RHP: 109222.51072062753,
    yhat: 108575.91481049417},
   {county: '桃園市',
    time: "202404",
    complex_name: '愛上杜拜',
    RHP: 95223.10507333648,
    yhat: 80991.32026262273},
   {county: '桃園市',
    time: "202404",
    complex_name: '金華大學城',
    RHP: 91340.46649677548,
    yhat: 77748.34013471263},
   {county: '桃園市',
    time: "202405",
    complex_name: '元智生活會館(元智金雞母)',
    RHP: 85239.37262964169,
    yhat: 83015.48641750682},
   {county: '桃園市',
    time: "202405",
    complex_name: '金華大學城',
    RHP: 92109.303039607,
    yhat: 77614.46998615407},
   {county: '桃園市',
    time: "202406",
    complex_name: '名軒快樂家',
    RHP: 130694.20886842743,
    yhat: 109374.91256830817},
   {county: '桃園市',
    time: "202406",
    complex_name: '巴黎富邑社區',
    RHP: 114973.24169276189,
    yhat: 98358.59006083859},
   {county: '桃園市',
    time: "202406",
    complex_name: '愛上杜拜',
    RHP: 76289.28898382669,
    yhat: 83878.38598407015},
   {county: '桃園市',
    time: "202406",
    complex_name: '金華大學城',
    RHP: 116279.06976744186,
    yhat: 81856.66689144194},
   {county: '桃園市',
    time: "202407",
    complex_name: '元智生活會館(元智金雞母)',
    RHP: 83924.57729828943,
    yhat: 84782.61589529425},
   {county: '桃園市',
    time: "202407",
    complex_name: '名軒快樂家',
    RHP: 126348.83862708043,
    yhat: 111301.19385217695},
   {county: '桃園市',
    time: "202407",
    complex_name: '愛上杜拜',
    RHP: 96665.58053654828,
    yhat: 84949.31213820793},
   {county: '桃園市',
    time: "202407",
    complex_name: '金華大學城',
    RHP: 89373.03231957073,
    yhat: 78543.25042819644},
   {county: '桃園市',
    time: "202408",
    complex_name: '元智生活會館(元智金雞母)',
    RHP: 104232.46999368288,
    yhat: 84296.32939147025},
   {county: '桃園市',
    time: "202408",
    complex_name: '名軒快樂家',
    RHP: 139454.3973941368,
    yhat: 114281.77721830837},
   {county: '桃園市',
    time: "202408",
    complex_name: '巴黎富邑社區',
    RHP: 120999.9604712256,
    yhat: 104782.0714162107},
   {county: '桃園市',
    time: "202409",
    complex_name: '元智生活會館(元智金雞母)',
    RHP: 107424.96050552923,
    yhat: 82845.02277748093},
   {county: '桃園市',
    time: "202409",
    complex_name: '愛上杜拜',
    RHP: 101630.351973183,
    yhat: 84148.27288072514},
   {county: '桃園市',
    time: "202409",
    complex_name: '金華大學城',
    RHP: 114503.81679389311,
    yhat: 78471.87300000219},
   {county: '臺中市',
    time: "202207",
    complex_name: '逢甲西門町',
    RHP: 85356.65208249453,
    yhat: 79760.73121469692},
   {county: '臺中市',
    time: "202208",
    complex_name: '逢甲西門町',
    RHP: 75347.75888717157,
    yhat: 82376.363078169},
   {county: '臺中市',
    time: "202212",
    complex_name: '太子雲世紀B區',
    RHP: 115629.9657182568,
    yhat: 115532.22453595696},
   {county: '臺中市',
    time: "202212",
    complex_name: '逢甲西門町',
    RHP: 73978.21632697077,
    yhat: 81106.31422372579},
   {county: '臺中市',
    time: "202302",
    complex_name: '逢甲西門町',
    RHP: 76608.24850456501,
    yhat: 81039.26721548443},
   {county: '臺中市',
    time: "202303",
    complex_name: '太子雲世紀B區',
    RHP: 125894.43119361193,
    yhat: 125633.67291590307},
   {county: '臺中市',
    time: "202304",
    complex_name: '夏威夷大廈',
    RHP: 57974.18507985123,
    yhat: 65303.77029944573},
   {county: '臺中市',
    time: "202304",
    complex_name: '太子雲世紀B區',
    RHP: 106271.40181898868,
    yhat: 127087.27855908021},
   {county: '臺中市',
    time: "202305",
    complex_name: '夏威夷大廈',
    RHP: 80234.33520122261,
    yhat: 69870.59652728784},
   {county: '臺中市',
    time: "202305",
    complex_name: '太子雲世紀B區',
    RHP: 129109.19838224618,
    yhat: 128806.36602494029},
   {county: '臺中市',
    time: "202305",
    complex_name: '逢甲西門町',
    RHP: 76288.07287218902,
    yhat: 84710.18738141096},
   {county: '臺中市',
    time: "202306",
    complex_name: '夏威夷大廈',
    RHP: 77881.6199376947,
    yhat: 67966.0079285756},
   {county: '臺中市',
    time: "202308",
    complex_name: '逢甲西門町',
    RHP: 83122.51535959523,
    yhat: 90434.3570787196},
   {county: '臺中市',
    time: "202309",
    complex_name: '太子雲世紀B區',
    RHP: 132877.28026533994,
    yhat: 131371.3668784983},
   {county: '臺中市',
    time: "202309",
    complex_name: '逢甲西門町',
    RHP: 85007.72797527048,
    yhat: 89272.01608394778},
   {county: '臺中市',
    time: "202310",
    complex_name: '太子雲世紀B區',
    RHP: 136118.8191834963,
    yhat: 132823.14739287758},
   {county: '臺中市',
    time: "202311",
    complex_name: '夏威夷大廈',
    RHP: 63516.260162601626,
    yhat: 73619.23353468231},
   {county: '臺中市',
    time: "202311",
    complex_name: '太子雲世紀B區',
    RHP: 134825.55695670447,
    yhat: 135246.7965319093},
   {county: '臺中市',
    time: "202311",
    complex_name: '逢甲西門町',
    RHP: 94258.8791480742,
    yhat: 89910.41415946587},
   {county: '臺中市',
    time: "202312",
    complex_name: '夏威夷大廈',
    RHP: 60753.85938433247,
    yhat: 73543.37059564238},
   {county: '臺中市',
    time: "202312",
    complex_name: '太子雲世紀B區',
    RHP: 142930.8565531475,
    yhat: 134711.16043048847},
   {county: '臺中市',
    time: "202402",
    complex_name: '太子雲世紀B區',
    RHP: 153854.09142503346,
    yhat: 140505.55719564165},
   {county: '臺中市',
    time: "202403",
    complex_name: '夏威夷大廈',
    RHP: 76363.63636363637,
    yhat: 75749.48602337563},
   {county: '臺中市',
    time: "202404",
    complex_name: '太子雲世紀B區',
    RHP: 170011.5582641589,
    yhat: 142103.2543355433},
   {county: '臺中市',
    time: "202405",
    complex_name: '夏威夷大廈',
    RHP: 97687.22945604367,
    yhat: 81272.69923516575},
   {county: '臺中市',
    time: "202406",
    complex_name: '夏威夷大廈',
    RHP: 70567.10289966641,
    yhat: 84922.83141157693},
   {county: '臺中市',
    time: "202406",
    complex_name: '太子雲世紀B區',
    RHP: 151311.0166856669,
    yhat: 144103.18566090654},
   {county: '臺中市',
    time: "202406",
    complex_name: '逢甲西門町',
    RHP: 122932.87858087674,
    yhat: 98557.1631421073},
   {county: '臺中市',
    time: "202408",
    complex_name: '逢甲西門町',
    RHP: 78236.13086770981,
    yhat: 99746.76243992471},
   {county: '臺中市',
    time: "202409",
    complex_name: '太子雲世紀B區',
    RHP: 169319.76571534926,
    yhat: 142884.54129763547},
   {county: '臺中市',
    time: "202410",
    complex_name: '夏威夷大廈',
    RHP: 100333.58994098024,
    yhat: 81116.02972114946},
   {county: '臺南市',
    time: "202207",
    complex_name: '台南國寶',
    RHP: 51741.97999310107,
    yhat: 59411.075252582705},
   {county: '臺南市',
    time: "202208",
    complex_name: '鄉城大鎮',
    RHP: 77657.18562874252,
    yhat: 64341.82631640783},
   {county: '臺南市',
    time: "202209",
    complex_name: '鄉城大鎮',
    RHP: 66289.02012775702,
    yhat: 63877.51768507921},
   {county: '臺南市',
    time: "202211",
    complex_name: '台南國寶',
    RHP: 46077.06592386258,
    yhat: 61164.08915823984},
   {county: '臺南市',
    time: "202211",
    complex_name: '鄉城大鎮',
    RHP: 65256.89740624484,
    yhat: 60930.3194254072},
   {county: '臺南市',
    time: "202212",
    complex_name: '鄉城大鎮',
    RHP: 82524.2718446602,
    yhat: 65080.06583839338},
   {county: '臺南市',
    time: "202302",
    complex_name: '鄉城大鎮',
    RHP: 70210.75631532696,
    yhat: 64578.10823865953},
   {county: '臺南市',
    time: "202303",
    complex_name: '台南國寶',
    RHP: 55738.73662671032,
    yhat: 63942.334179663136},
   {county: '臺南市',
    time: "202303",
    complex_name: '鄉城大鎮',
    RHP: 66987.7551096774,
    yhat: 64017.748042401545},
   {county: '臺南市',
    time: "202304",
    complex_name: '鄉城大鎮',
    RHP: 62729.081261276166,
    yhat: 66340.08781649315},
   {county: '臺南市',
    time: "202305",
    complex_name: '鄉城大鎮',
    RHP: 92020.65030341451,
    yhat: 66089.5683057238},
   {county: '臺南市',
    time: "202308",
    complex_name: '台南國寶',
    RHP: 67467.3484891798,
    yhat: 64500.116671898475},
   {county: '臺南市',
    time: "202309",
    complex_name: '鄉城大鎮',
    RHP: 70179.47327644486,
    yhat: 67858.81814397403},
   {county: '臺南市',
    time: "202310",
    complex_name: '台南國寶',
    RHP: 51741.97999310107,
    yhat: 62399.1458505987},
   {county: '臺南市',
    time: "202310",
    complex_name: '鄉城大鎮',
    RHP: 68269.09401223154,
    yhat: 70105.24140376941},
   {county: '臺南市',
    time: "202311",
    complex_name: '台南國寶',
    RHP: 79486.06271777004,
    yhat: 67304.50316257092},
   {county: '臺南市',
    time: "202311",
    complex_name: '鄉城大鎮',
    RHP: 69631.94543129174,
    yhat: 68904.96023905264},
   {county: '臺南市',
    time: "202312",
    complex_name: '台南國寶',
    RHP: 59801.81197711059,
    yhat: 63902.54360088011},
   {county: '臺南市',
    time: "202312",
    complex_name: '鄉城大鎮',
    RHP: 58818.66997108633,
    yhat: 63106.96442675198},
   {county: '臺南市',
    time: "202402",
    complex_name: '鄉城大鎮',
    RHP: 82491.82193144645,
    yhat: 71408.15220926101},
   {county: '臺南市',
    time: "202403",
    complex_name: '台南國寶',
    RHP: 65762.52591271357,
    yhat: 64780.53932408413},
   {county: '臺南市',
    time: "202404",
    complex_name: '台南國寶',
    RHP: 62988.46296985485,
    yhat: 64732.73148099204},
   {county: '臺南市',
    time: "202406",
    complex_name: '台南國寶',
    RHP: 78517.86742725893,
    yhat: 69116.50368309878},
   {county: '臺南市',
    time: "202407",
    complex_name: '鄉城大鎮',
    RHP: 68106.3122923588,
    yhat: 69407.56609676815},
   {county: '臺南市',
    time: "202408",
    complex_name: '鄉城大鎮',
    RHP: 70241.89777089612,
    yhat: 71378.82145795357},
   {county: '臺南市',
    time: "202409",
    complex_name: '鄉城大鎮',
    RHP: 89526.78698308938,
    yhat: 73027.76886026161},
   {county: '苗栗縣',
    time: "202210",
    complex_name: '凱泉天籟',
    RHP: 68665.79747935681,
    yhat: 71942.21585132714},
   {county: '苗栗縣',
    time: "202304",
    complex_name: '凱泉天籟',
    RHP: 72838.98305084746,
    yhat: 76486.63957719496},
   {county: '苗栗縣',
    time: "202305",
    complex_name: '凱泉天籟',
    RHP: 69193.53131982412,
    yhat: 74218.42010781645},
   {county: '苗栗縣',
    time: "202308",
    complex_name: '凱泉天籟',
    RHP: 75730.98715269969,
    yhat: 79349.00371518685},
   {county: '苗栗縣',
    time: "202309",
    complex_name: '凱泉天籟',
    RHP: 72527.66301316037,
    yhat: 79523.82458796163},
   {county: '苗栗縣',
    time: "202311",
    complex_name: '凱泉天籟',
    RHP: 76488.4832681443,
    yhat: 85014.64953563093},
   {county: '苗栗縣',
    time: "202402",
    complex_name: '凱泉天籟',
    RHP: 79965.2325076054,
    yhat: 91393.36678326728},
   {county: '苗栗縣',
    time: "202403",
    complex_name: '凱泉天籟',
    RHP: 100449.83881351925,
    yhat: 93448.97687134266},
   {county: '苗栗縣',
    time: "202407",
    complex_name: '凱泉天籟',
    RHP: 113373.99003122537,
    yhat: 101375.43877587268},
   {county: '苗栗縣',
    time: "202408",
    complex_name: '凱泉天籟',
    RHP: 117340.28683181228,
    yhat: 97855.58291643175},
   {county: '高雄市',
    time: "202210",
    complex_name: '博愛佳人大樓',
    RHP: 110309.53779045382,
    yhat: 96957.48588892014},
   {county: '高雄市',
    time: "202212",
    complex_name: '博愛佳人大樓',
    RHP: 87059.08784542799,
    yhat: 93782.5188104888},
   {county: '高雄市',
    time: "202212",
    complex_name: '英倫亞灣',
    RHP: 81872.16206776109,
    yhat: 82540.07535301398},
   {county: '高雄市',
    time: "202303",
    complex_name: '英倫亞灣',
    RHP: 76794.05774529772,
    yhat: 84442.32198834352},
   {county: '高雄市',
    time: "202305",
    complex_name: '博愛佳人大樓',
    RHP: 110714.57539135372,
    yhat: 99040.71136309899},
   {county: '高雄市',
    time: "202306",
    complex_name: '英倫亞灣',
    RHP: 74997.18055712192,
    yhat: 77716.41029196982},
   {county: '高雄市',
    time: "202307",
    complex_name: '博愛佳人大樓',
    RHP: 87985.08332362195,
    yhat: 99186.23776823688},
   {county: '高雄市',
    time: "202308",
    complex_name: '博愛佳人大樓',
    RHP: 105596.62090813094,
    yhat: 96049.23719926455},
   {county: '高雄市',
    time: "202310",
    complex_name: '博愛佳人大樓',
    RHP: 74037.32804190471,
    yhat: 92780.5173849934},
   {county: '高雄市',
    time: "202311",
    complex_name: '博愛佳人大樓',
    RHP: 90842.72852623896,
    yhat: 93889.79438606904},
   {county: '高雄市',
    time: "202312",
    complex_name: '博愛佳人大樓',
    RHP: 96153.84615384616,
    yhat: 98352.18311562767},
   {county: '高雄市',
    time: "202312",
    complex_name: '英倫亞灣',
    RHP: 77082.77332368621,
    yhat: 80758.19476509518},
   {county: '高雄市',
    time: "202403",
    complex_name: '博愛佳人大樓',
    RHP: 111212.81464530891,
    yhat: 108368.2261351391},
   {county: '高雄市',
    time: "202403",
    complex_name: '英倫亞灣',
    RHP: 104430.99588058789,
    yhat: 93735.76906062599},
   {county: '高雄市',
    time: "202404",
    complex_name: '英倫亞灣',
    RHP: 108339.36055157533,
    yhat: 98492.98681923171},
   {county: '高雄市',
    time: "202405",
    complex_name: '博愛佳人大樓',
    RHP: 127032.25334170839,
    yhat: 107626.63967536218},
   {county: '高雄市',
    time: "202405",
    complex_name: '英倫亞灣',
    RHP: 102979.39662913149,
    yhat: 96433.88372660079},
   {county: '高雄市',
    time: "202406",
    complex_name: '博愛佳人大樓',
    RHP: 117999.0133783398,
    yhat: 105516.68493744422},
   {county: '高雄市',
    time: "202406",
    complex_name: '英倫亞灣',
    RHP: 99908.35863706557,
    yhat: 96835.94619172315},
   {county: '高雄市',
    time: "202407",
    complex_name: '博愛佳人大樓',
    RHP: 107680.97765063135,
    yhat: 100762.2113289079},
   {county: '高雄市',
    time: "202408",
    complex_name: '英倫亞灣',
    RHP: 107583.56295675092,
    yhat: 106892.24767990161},
   {county: '高雄市',
    time: "202410",
    complex_name: '英倫亞灣',
    RHP: 107404.79548660088,
    yhat: 90308.50997588095}];

const PriceComparisonChart = () => {
  const [selectedCounty, setSelectedCounty] = useState('all');
  const [selectedComplex, setSelectedComplex] = useState('all');
  const [sortField, setSortField] = useState(null);
  const [sortDirection, setSortDirection] = useState('asc');
  
  // 處理資料（使用 useMemo 優化）
  const processedData = useMemo(() => {
    return sampleData.map(item => ({
      ...item,
      time: `${item.time.substring(0, 4)}-${item.time.substring(4, 6)}`,
      RHP: Number(item.RHP.toFixed(2)),
      yhat: Number(item.yhat.toFixed(2))
    }));
  }, []);

  // 縣市列表（使用 useMemo 優化）
  const countyList = useMemo(() => {
    const counties = [...new Set(sampleData.map(item => item.county))];
    return ['all', ...counties];
  }, []);

  // 社區列表（使用 useMemo 優化）
  const complexList = useMemo(() => {
    let complexes = sampleData;
    if (selectedCounty !== 'all') {
      complexes = complexes.filter(item => item.county === selectedCounty);
    }
    const uniqueComplexes = [...new Set(complexes.map(item => item.complex_name))];
    return ['all', ...uniqueComplexes];
  }, [selectedCounty]);

  // 獲取篩選後的資料
  const getFilteredData = useMemo(() => {
    let filtered = processedData;
    
    if (selectedCounty !== 'all') {
      filtered = filtered.filter(item => item.county === selectedCounty);
    }
    
    if (selectedComplex !== 'all') {
      filtered = filtered.filter(item => item.complex_name === selectedComplex);
    }

    // 排序
    if (sortField) {
      filtered = [...filtered].sort((a, b) => {
        if (sortDirection === 'asc') {
          return a[sortField] - b[sortField];
        } else {
          return b[sortField] - a[sortField];
        }
      });
    } else {
      // 默認按時間排序
      filtered = filtered.sort((a, b) => a.time.localeCompare(b.time));
    }
    
    return filtered;
  }, [processedData, selectedCounty, selectedComplex, sortField, sortDirection]);

  // 計算平均誤差率
  const averageError = useMemo(() => {
    const errors = getFilteredData.map(item => 
      Math.abs((item.RHP - item.yhat)/item.RHP * 100)
    );
    return (errors.reduce((a, b) => a + b, 0) / errors.length).toFixed(2);
  }, [getFilteredData]);

  // 處理排序
  const handleSort = (field) => {
    if (sortField === field) {
      setSortDirection(sortDirection === 'asc' ? 'desc' : 'asc');
    } else {
      setSortField(field);
      setSortDirection('asc');
    }
  };

  return (
    <div className="space-y-4 p-4 bg-gray-50 sm:p-6 lg:p-8">
      <Card>
        <CardHeader>
          <CardTitle className="text-xl font-bold">房價預測比較分析</CardTitle>
          <div className="flex flex-col sm:flex-row flex-wrap gap-4">
            <div className="space-y-2">
              <label className="font-medium">選擇縣市：</label>
              <select 
                value={selectedCounty}
                onChange={(e) => {
                  setSelectedCounty(e.target.value);
                  setSelectedComplex('all');
                }}
                className="border rounded p-2"
              >
                {countyList.map(county => (
                  <option key={county} value={county}>
                    {county === 'all' ? '全部縣市' : county}
                  </option>
                ))}
              </select>
            </div>
            
            <div className="space-y-2">
              <label className="font-medium">選擇社區：</label>
              <select 
                value={selectedComplex}
                onChange={(e) => setSelectedComplex(e.target.value)}
                className="border rounded p-2"
              >
                {complexList.map(complex => (
                  <option key={complex} value={complex}>
                    {complex === 'all' ? '全部社區' : complex}
                  </option>
                ))}
              </select>
            </div>
          </div>
        </CardHeader>
        <CardContent>
          <div className="h-96">
            <ResponsiveContainer width="100%" height="100%">
              <LineChart data={getFilteredData}>
                <CartesianGrid strokeDasharray="3 3" />
                <XAxis 
                  dataKey="time" 
                  angle={45} 
                  textAnchor="start" 
                  height={60}
                />
                <YAxis 
                  domain={['auto', 'auto']}
                  tickFormatter={(value) => `${(value/10000).toFixed(1)}萬`}
                />
                <Tooltip 
                    formatter={(value, name) => {
                    const formattedValue = `${(value/10000).toFixed(2)}萬`;
                    if (name === 'RHP') {
                        return [formattedValue, '實際房價'];
                    }
                    if (name === 'yhat') {
                        return [formattedValue, '預測房價'];
                    }
                    return [formattedValue, name];
                    }}
                    labelFormatter={(label) => `時間：${label}`}
                />
                <Legend 
                  payload={[
                    { value: '實際房價', type: 'line', color: '#8884d8' },
                    { value: '預測房價', type: 'line', color: '#82ca9d' }
                  ]}
                />
                <Line 
                  type="monotone" 
                  dataKey="RHP" 
                  name="實際房價" 
                  stroke="#8884d8" 
                  strokeWidth={2}
                  dot={{ r: 4 }}
                />
                <Line 
                  type="monotone" 
                  dataKey="yhat" 
                  name="預測房價" 
                  stroke="#82ca9d" 
                  strokeWidth={2}
                  dot={{ r: 4 }}
                />
              </LineChart>
            </ResponsiveContainer>
          </div>
        </CardContent>
      </Card>

      <Card>
        <CardHeader>
          <CardTitle>詳細數據</CardTitle>
        </CardHeader>
        <CardContent>
          <div className="overflow-x-auto">
            <table className="min-w-full">
              <thead>
                <tr className="bg-gray-100">
                  <th className="px-4 py-2">時間</th>
                  <th className="px-4 py-2">縣市</th>
                  <th className="px-4 py-2">社區</th>
                  <th 
                    className="px-4 py-2 cursor-pointer hover:bg-gray-200"
                    onClick={() => handleSort('RHP')}
                  >
                    實際房價 {sortField === 'RHP' && (sortDirection === 'asc' ? '↑' : '↓')}
                  </th>
                  <th 
                    className="px-4 py-2 cursor-pointer hover:bg-gray-200"
                    onClick={() => handleSort('yhat')}
                  >
                    預測房價 {sortField === 'yhat' && (sortDirection === 'asc' ? '↑' : '↓')}
                  </th>
                  <th className="px-4 py-2">誤差</th>
                </tr>
              </thead>
              <tbody>
                {getFilteredData.map((item, index) => (
                  <tr key={index} className="border-b">
                    <td className="px-4 py-2">{item.time}</td>
                    <td className="px-4 py-2">{item.county}</td>
                    <td className="px-4 py-2">{item.complex_name}</td>
                    <td className="px-4 py-2">{(item.RHP/10000).toFixed(2)}萬</td>
                    <td className="px-4 py-2">{(item.yhat/10000).toFixed(2)}萬</td>
                    <td className="px-4 py-2">
                      {((item.RHP - item.yhat)/item.RHP * 100).toFixed(2)}%
                    </td>
                  </tr>
                ))}
              </tbody>
            </table>
          </div>
          <div className="mt-4 p-4 bg-gray-100 rounded">
            <p>平均誤差率: {averageError}%</p>
          </div>
        </CardContent>
      </Card>
    </div>
  );
};

export default PriceComparisonChart;